!function(o,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(o=o||self).PullDown=i()}(this,function(){"use strict";var n="undefined"!=typeof window,o=n&&navigator.userAgent.toLowerCase(),t=(o&&/wechatdevtools/.test(o),o&&o.indexOf("android"),n&&document.createElement("div").style),i=function(){if(!n)return!1;var o={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var i in o)if(void 0!==t[o[i]])return i;return!1}();function l(o){return!1===i?o:"standard"===i?"transitionEnd"===o?"transitionend":o:i+o.charAt(0).toUpperCase()+o.substr(1)}i&&"standard"!==i&&i.toLowerCase();var s=l("transform"),r=l("transition"),e=(n&&l("perspective"),l("transitionTimingFunction"),l("transitionDuration"),l("transitionDelay"),l("transformOrigin"),l("transitionEnd"),{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(o){return 1- --o*o*o*o}}),c=n&&window;function a(){}n&&(c.requestAnimationFrame||c.webkitRequestAnimationFrame||c.mozRequestAnimationFrame||c.oRequestAnimationFrame),n&&(c.cancelAnimationFrame||c.webkitCancelAnimationFrame||c.mozCancelAnimationFrame||c.oCancelAnimationFrame);var u=[{key:"finishPullDown",name:"finish"},{key:"openPullDown",name:"open"},{key:"closePullDown",name:"close"},{key:"autoPullDownRefresh",name:"autoPull"}].map(function(o){return{key:o.key,sourceKey:"plugins.pullDownRefresh."+o.name}});function h(o){this.scroll=o,this.pulling=!1,o.options.pullDownRefresh&&this._watch(),this.scroll.registerType(["pullingDown"]),this.scroll.proxy(u)}return h.prototype._watch=function(){this.scroll.options.probeType=3,this.scroll.scroller.hooks.on("end",this._checkPullDown,this)},h.prototype._checkPullDown=function(){if(this.scroll.options.pullDownRefresh){var o=this.scroll.options.pullDownRefresh,i=o.threshold,n=void 0===i?90:i,t=o.stop,l=void 0===t?40:t;return!(-1!==this.scroll.directionY||this.scroll.y<n)&&(this.pulling||(this.pulling=!0,this.scroll.trigger("pullingDown"),this.originalMinScrollY=this.scroll.minScrollY,this.scroll.minScrollY=l),this.scroll.scrollTo(this.scroll.x,l,this.scroll.options.bounceTime,e),this.pulling)}},h.prototype.finish=function(){this.pulling=!1,this.scroll.minScrollY=this.originalMinScrollY,this.scroll.resetPosition(this.scroll.options.bounceTime,e)},h.prototype.open=function(o){void 0===o&&(o=!0),this.scroll.options.pullDownRefresh=o,this._watch()},h.prototype.close=function(){this.scroll.options.pullDownRefresh=!1},h.prototype.autoPull=function(){var o=this.scroll.options.pullDownRefresh,i=o.threshold,n=void 0===i?90:i,t=o.stop,l=void 0===t?40:t;this.pulling||(this.pulling=!0,this.originalMinScrollY=this.scroll.minScrollY,this.scroll.minScrollY=n,this.scroll.scrollTo(this.scroll.x,n),this.scroll.trigger("pullingDown"),this.scroll.scrollTo(this.scroll.x,l,this.scroll.options.bounceTime,e))},h.pluginName="pullDownRefresh",h});
