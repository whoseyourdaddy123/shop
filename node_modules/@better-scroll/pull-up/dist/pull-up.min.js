!function(o,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(o=o||self).PullUp=t()}(this,function(){"use strict";var t=[{key:"finishPullUp",name:"finish"},{key:"openPullUp",name:"open"},{key:"closePullUp",name:"close"}].map(function(o){return{key:o.key,sourceKey:"plugins.pullUpLoad."+o.name}});function o(o){this.bscroll=o,this.watching=!1,o.options.pullUpLoad&&this._watch(),this.bscroll.registerType(["pullingUp"]),this.bscroll.proxy(t)}return o.prototype._watch=function(){this.watching||(this.bscroll.options.probeType=3,this.watching=!0,this.bscroll.on("scroll",this._checkToEnd,this))},o.prototype._checkToEnd=function(o){var t=this;if(this.bscroll.options.pullUpLoad){var i=this.bscroll.options.pullUpLoad.threshold,l=void 0===i?0:i;1===this.bscroll.movingDirectionY&&o.y<=this.bscroll.maxScrollY+l&&(this.bscroll.once("scrollEnd",function(){t.watching=!1}),this.bscroll.trigger("pullingUp"),this.bscroll.off("scroll",this._checkToEnd))}},o.prototype.finish=function(){this.watching?this.bscroll.once("scrollEnd",this._watch,this):this._watch()},o.prototype.open=function(o){void 0===o&&(o=!0),this.bscroll.options.pullUpLoad=o,this._watch()},o.prototype.close=function(){this.bscroll.options.pullUpLoad=!1,this.watching&&(this.watching=!1,this.bscroll.off("scroll",this._checkToEnd))},o.pluginName="pullUpLoad",o});
